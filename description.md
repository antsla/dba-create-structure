#Schema documentation

Generated by MySQL Workbench Model Documentation v1.0.0 - Copyright (c) 2015 Hieu Le

##Table: `posts`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | BIGINT | PRIMARY, Auto increments, Not null |   | Поле будет использоваться только для связей. Поиск постов будет осуществлять по полю url. |
| `category_id` | INT | Not null |   |  **foreign key** to column `id` on table `categories`. |
| `status_id` | INT | Not null |   |  **foreign key** to column `id` on table `statuses`. |
| `locale_id` | INT | Not null |   |  **foreign key** to column `id` on table `locales`. |
| `url` | VARCHAR(255) | Not null, Unique |   | Символьное поле для поиска постов. |
| `author_id` | INT | Not null |   | FK на пользователя. Тип тот же, что и PK users.<br /><br />**foreign key** to column `id` on table `users`. |
| `parent_id` | INT | Not null | `0` | Поле ссылается на id поэтому тип этот же. |
| `title` | VARCHAR(255) | Not null |   |   |
| `description` | TEXT | Not null |   |   |
| `image` | CHAR(30) |  |   | Поле названия картинки. Создаваться и контролироваться размерность поля будет на уровне приложения. |
| `image_preview` | CHAR(30) |  |   | Поле названия картинки-превью. Создаваться и контролироваться размерность поля будет на уровне приложения. |
| `created_at` | TIMESTAMP | Not null | `NOW()` | Дата создания. |
| `updated_at` | TIMESTAMP | Not null | `NOW()` | Дата последнего обновления. |
| `deleted_at` | TIMESTAMP |  | `NULL` |   |
| `last_view_at` | TIMESTAMP |  |   | Дата последнего просмотра. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| fk_author_id_idx | `author_id` | INDEX |   |
| idx_parent_id | `parent_id` | INDEX | Индекс для поиска родительского поста (при репосте). |
| un_url | `url` | UNIQUE | Обращение к конкретному посту будет происходить по url. |
| fk_locale_id_idx | `locale_id` | INDEX |   |
| fk_category_id_idx | `category_id` | INDEX |   |
| fk_status_id_idx | `status_id` | INDEX |   |


##Table: `locales`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   | Тип должен покрывать все существующие локали (языки), примерно 6000. |
| `name` | CHAR(2) | Not null, Unique |   | Название локали. Ограничивается 2 символами. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| un_name | `name` | UNIQUE | Название локали - уникально. |


##Table: `comments`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | BIGINT | PRIMARY, Auto increments, Not null |   | Идентификатор комментария. |
| `post_id` | BIGINT | Not null |   | FK на posts. Тип тот же, что и id (posts).<br /><br />**foreign key** to column `id` on table `posts`. |
| `author_id` | INT | Not null |   | FK на users. Тип тот же, что и id (users).<br /><br />**foreign key** to column `id` on table `users`. |
| `description` | TEXT | Not null |   |   |
| `created_at` | TIMESTAMP | Not null | `NOW()` | Дата создания. |
| `updated_at` | TIMESTAMP | Not null | `NOW()` | Дата последнего изменения. |
| `deleted_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| fk_post_id_idx | `post_id` | INDEX |   |
| fk_author_id_idx | `author_id` | INDEX |   |


##Table: `posts_likes`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `post_id` | BIGINT | Not null, Unique |   | FK на posts. Тип тот же, что и id (posts).<br /><br />**foreign key** to column `id` on table `posts`. |
| `user_id` | INT | Not null, Unique |   | FK на users. Тип тот же, что и id (users).<br /><br />**foreign key** to column `id` on table `users`. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| fk_post_id_idx | `post_id` | INDEX |   |
| fk_user_id_idx | `user_id` | INDEX |   |
| un_post_id_user_id | `post_id`, `user_id` | UNIQUE | Индекс гарантирует, что один пост не лайкал несколько раз один юзер. |


##Table: `posts_views`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `post_id` | BIGINT | Not null |   | FK на posts. Тип тот же, что и id (posts).<br /><br />**foreign key** to column `id` on table `posts`. |
| `user_id` | INT | Not null |   | FK на users. Тип тот же, что и id (users).<br /><br />**foreign key** to column `id` on table `users`. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| fk_post_id_idx | `post_id` | INDEX |   |
| fk_user_id_idx | `user_id` | INDEX |   |


##Table: `users`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   | Идентификатор пользователя.  Личного кабинета в блоге не предусмотрено. Поэтому выгрузить пользователя по id нельзя. |
| `name` | VARCHAR(255) | Not null, Unique |   | Имя пользователя. |
| `mail` | VARCHAR(255) | Not null, Unique |   | Почта пользователя. |
| `deleted_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| un_name | `name` | UNIQUE | Логин пользователя уникален. Поиск пользователя по логину. |
| un_mail | `mail` | UNIQUE | Для одной почты нельзя зарегестрировать несколько пользователей. |


##Table: `posts_info`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `post_id` | BIGINT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `posts`. |
| `views` | INT | Not null | `0` |   |
| `likes` | INT | Not null | `0` |   |
| `reposts` | INT | Not null | `0` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `post_id` | PRIMARY |   |


##Table: `categories`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `url` | VARCHAR(45) | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


##Table: `categories_locales`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `category_id` | INT | Not null, Unique |   |  **foreign key** to column `id` on table `categories`. |
| `locale_id` | INT | Unique |   |  **foreign key** to column `id` on table `locales`. |
| `title` | VARCHAR(45) | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| idx_category_id_locale_id | `category_id`, `locale_id` | UNIQUE |   |


##Table: `statuses`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Not null |   |   |
| `title` | VARCHAR(45) |  |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


##Table: `users_subscribers`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `user_id` | INT | Not null, Unique |   | Идентификатор пользователя.  Личного кабинета в блоге не предусмотрено. Поэтому выгрузить пользователя по id нельзя.<br /><br />**foreign key** to column `id` on table `users`. |
| `subscriber_id` | INT | Not null, Unique |   | Имя пользователя.<br /><br />**foreign key** to column `id` on table `users`. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| fk_user_id_idx | `user_id` | INDEX |   |
| fk_subscriber_id_idx | `subscriber_id` | INDEX |   |
| un_user_id_subscriber_id | `user_id`, `subscriber_id` | UNIQUE |   |


